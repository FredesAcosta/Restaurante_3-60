<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Carrito de Compras - Restaurante 360</title>
  <link rel="stylesheet" href="/static/CSS/stylecarrito.css">
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <div class="container">
      <div class="logo"></div>
      <nav class="main-nav">
        <a href="/inicio">Inicio</a>
        <a href="/mesas">Mesas</a>
        <a href="/mis_pedidos">Pedidos</a>
        <a href="/menu" class="activo">Men煤</a>
        <a href="/carrito">Carrito</a>
      </nav>
    </div>
  </header>

  <!-- Contenedor Carrito -->
  <div class="carrito-container">
    <h1>Resumen de tu Pedido</h1>

    <ul class="carrito-lista">
      {% for item in carrito_items %}
        <li class="carrito-item">
          <span>{{ item.nombre }} - ${{ '%.2f'|format(item.precio) }}</span>
          <form action="{{ url_for('quitar_carrito') }}" method="POST" style="display:inline;">
            <input type="hidden" name="producto_id" value="{{ item.id_producto }}">
            <button type="submit" class="btn-quitar">Quitar</button>
          </form>
        </li>
      {% endfor %}
    </ul>

    <p class="total"><strong>Total:</strong> ${{ '%.2f'|format(total_carrito) }}</p>

    <!--  Secci贸n de mesa o direcci贸n -->
    {% if session.get("tipo_pedido") == "mesa" %}
      <p><strong>Mesa reservada:</strong> {{ session.get("numero_mesa") }}</p>
    {% else %}
      {% if direccion %}
        <p><strong>Direcci贸n de entrega:</strong> {{ direccion }}</p>
        <a href="{{ url_for('pedido_domicilio') }}">锔 Corregir direcci贸n</a>
      {% else %}
        <p><strong>No has confirmado direcci贸n.</strong> 
          <a href="{{ url_for('pedido_domicilio') }}">Agregar direcci贸n</a>
        </p>
      {% endif %}
    {% endif %}
    <br>

    <!-- Formulario de Pago -->
    <form id="pedido-form" action="{{ url_for('realizar_pedido') }}" method="POST" onsubmit="mostrarLoader()">
      <label for="metodo_pago">M茅todo de pago:</label><br>
      <input type="radio" name="metodo_pago" value="efectivo" required> Efectivo<br>
      <input type="radio" name="metodo_pago" value="tarjeta"> Tarjeta<br>
      <input type="radio" name="metodo_pago" value="transferencia"> Transferencia<br><br>

      <button type="submit" class="btn-confirmar">Realizar Pedido</button>
    </form>

    <a href="/menu" class="btn-volver">Volver al men煤</a>
  </div>

  <!-- Modal Loader -->
  <div id="loader-modal" class="loader-modal">
    <div class="loader-content">
      <div class="spinner"></div>
      <p>Procesando tu pedido...</p>
      <button type="button" class="btn-cancelar" onclick="cancelarPedido()">Cancelar</button>
    </div>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container">
      <p>&copy; 2025 Restaurante 360 | Desarrollado por <a href="#">Brandon Florez y Fredes Acosta</a></p>
    </div>
  </footer>

  <script src="/static/script_carrito.js"></script>
</body>
</html>
